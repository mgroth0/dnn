{
  "version": 3,
  "file": "exp_lib.js",
  "sourceRoot": "",
  "sources": [
    "exp_lib.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "_current_step_index = null\n_current_step = null\n_steps = null\nclass Step\n    constructor: (@save_after, @controls) ->\n        @readyForKey = false\n        @finish_unixms = null\n        @finished_data_push = false\n        @last_step = null\n        @is_last_trial = false\n    run        : ->\n        log \"running #{@}\"\n    onkey      : (e) ->\n    data       : ->\n        d =\n            finish_unixms: @finish_unixms\n    finish     : ->\n        @finish_unixms = new Date().getTime()\n        if _current_step_index < _steps.length - 1\n            id.prog.value += 1\n            id.top.style[\"justify-content\"] = \"center\" #so load indicator is centered\n            run_next = =>\n#                if @ instanceof\n                if @is_last_trial\n                    push_data_async((t)=>\n                        @finished_data_push = true\n                    )\n                    wait_timeout_recurse = =>\n                        if not @finished_data_push\n                            log('waiting for data to push...')\n                            #                            id.loadIndicator.alternate(['/', '\\\\'], 1000)\n                            setTimeout(=>\n                                wait_timeout_recurse()\n                            , 100)\n                        else\n                            log('fading last trial loading indicator')\n                            id.loadIndicator.fade(->\n                                log('faded last trial loading indicator')\n                                #                               id.loadIndicator.stop_alternating()\n                                id.top.style[\"justify-content\"] = null\n                                run_step(_current_step_index + 1)\n                            )\n                    #\n                    id.loadIndicator.unfade()\n                    wait_timeout_recurse()\n                else\n                    if @save_after\n                        push_data_async((t)=>\n                            @finished_data_push = true\n                        )\n                    else\n                        @finished_data_push = true\n                    id.loadIndicator.fade(->\n#                        id.loadIndicator.stop_alternating()\n                        id.top.style[\"justify-content\"] = null\n                        run_step(_current_step_index + 1)\n                    )\n\n            if @last_step?\n                id.loadIndicator.unfade()\n                wait_timeout_recurse = =>\n                    if not @last_step.finished_data_push\n                        log('waiting for data to push...')\n                        #                        id.loadIndicator.alternate(['/', '\\\\'], 1000)\n                        setTimeout(=>\n                            wait_timeout_recurse()\n                        , 100)\n                    else\n                        run_next()\n                wait_timeout_recurse()\n            else\n                run_next()\nclass Instruction extends Step\n    constructor: (@text, @extra_id) -> super(false, [SPACE_BAR])\n    run        : ->\n        super()\n        id.top.style['justify-content'] = 'center'\n        if !@extra_id?\n#            apparently id isn't even needed since ids are auto-added to Window???????\n            id['text-container'].style.height = '100%' # so the text is centered\n            id.text.style.height = '100%' # so the text is centered\n        else\n            id['text-container'].style.height = null\n            id.text.style.height = null\n        id['text-container'].unfade()\n        id.text.style['text-align'] = 'left' #best alignment for typing\n        if @extra_id?\n            @extra_id.appear(false, true)\n            @extra_id.op = 0\n        id.text.type(@text.replace('TOKEN_VERSION', id.VERSION.innerHTML), =>\n            if @extra_id?\n                @extra_id.unfade(=>\n                    @readyForKey = true\n                )\n            else\n                @readyForKey = true\n        )\n\n    finish: ->\n        @extra_id?.fade()\n        id['text-container'].fade(=>\n            id.text.style['text-align'] = 'center' #for trials\n            super()\n        )\nuser = null\nclass Login extends Instruction\n    constructor: (text) ->\n        super(text, id.login)\n        @controls = []\n        @save_after = true\n\n        #        FOR SAFARI\n        #        if (id.birthday.type!=\"date\"){ #if browser doesn't support input type=\"date\", load files for jQuery UI Date Picker\n        #            document.write('<link href=\"http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css\" rel=\"stylesheet\" type=\"text/css\" />\\n')\n        #            document.write('<script src=\"http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js\"><\\/script>\\n')\n        #        }\n        #        if (id.birthday.type != \"date\") #if browser doesn't support input type=\"date\", initialize date picker widget:\n        #            $(document).ready(->\n\n        #        nah, I want all browsers to act the same so I'll just override any native implementations\n        #        $('#birthday').datepicker()\n\n        #            )\n\n        change_days = () ->\n            month = id.birthday_month.value\n            year = id.birthday_year.value\n            monthNum = new Date(Date.parse(month + \" 1,\" + year)).getMonth() + 1\n            num_days = new Date(year, monthNum, 0).getDate()\n            current_day = id.birthday_day.value\n            while id.birthday_day.firstChild\n                id.birthday_day.removeChild(id.birthday_day.lastChild)\n            for d in [0..num_days]\n                node = document.createElement(\"OPTION\")\n                node.innerHTML = d.toString()\n                id.birthday_day.appendChild(node)\n            if Number(current_day) in [0..num_days]\n                id.birthday_day.value = current_day\n        id.birthday_month.onchange = ->\n            change_days()\n        id.birthday_year.onchange = ->\n            change_days()\n\n        id.login_button.onclick = (e) =>\n            user =\n                first_name: id.first_name.value.toUpperCase()\n                last_name : id.last_name.value.toUpperCase()\n                birthday  : \"#{id.birthday_month.value}-#{id.birthday_day.value}-#{id.birthday_year.value}\"\n            @.finish()\n    finish     : ->\n        openFullscreen(tag.body)\n        super()\n\n\nleft_control = LEFT_ARROW\nright_control = RIGHT_ARROW\nchoice_text_center = '<-?->'\n\nclass BinaryChoice_Base extends Step\n    constructor     : (@im, @t, @left_choice, @right_choice) ->\n        super(false, [left_control, right_control])\n        @choice = null\n        @fix_path = true\n        @presentation_time_unixms = null\n        @reaction_time_ms = null\n    run             : ->\n        super()\n        RESOURCES_ROOT_REL = id.RESOURCES_ROOT_REL.innerHTML\n        id.top.style[\"justify-content\"] = \"center\" # so the text and img is centered\n        id['text-container'].disappear() # so the img is centered\n        #        id.text.innerHTML = center_str(\"#{@left_choice} <-?-> #{@right_choice}\",'?')\n        id.text.innerHTML = center_str(\"#{@left_choice} #{choice_text_center} #{@right_choice}\", '?')\n        id['im-container'].appear()\n        id.cross.appear()\n        id.im.src = if @fix_path then path_join(RESOURCES_ROOT_REL, @im) else @im\n        @display_stimulus()\n    display_stimulus: -> throw 'abstract'\n    onkey           : (e) ->\n        @reaction_time_ms = new Date().getTime() - @presentation_time_unixms\n        @choice = (if (e.keyCode == left_control.keyCode) then @left_choice else @right_choice)\n    data            : ->\n        merge({@im, @t, @choice, @reaction_time_ms}, super())\n    finish          : ->\n        id.im.disappear()\n        id['im-container'].disappear()\n        id['text-container'].disappear()\n        #        id['text-container'].style.height = null\n        #        id.text.style.height = null\n        id.top.style[\"justify-content\"] = null\n        super()\n\n\n\nclass BinaryChoice_Flash extends BinaryChoice_Base\n    display_stimulus: ->\n        setTimeout(=>\n            id.cross.disappear()\n            setTimeout(=>\n                id.im.disappear()\n                id['text-container'].style.height = '100%' # so the text is centered\n                id.text.style.height = '100%' # so the text is centered\n                id['text-container'].appear()\n                @readyForKey = true\n            , @t)\n            id.im.appear()\n            @presentation_time_unixms = new Date().getTime()\n        , 1000)\n\nclass BinaryChoice_Wait extends BinaryChoice_Base\n    display_stimulus: ->\n        setTimeout(=>\n            id.cross.disappear()\n            #            setTimeout(=>\n            #                id.im.disappear()\n            #                id.text.innerHTML = \"#{@left_choice}<- ->#{@right_choice}\"\n            #                id['text-container'].style.height = '100%'\n            #                id.text.style.height = '100%'\n            #                id['text-container'].appear()\n            #                @readyForKey = true\n            #            , @t)\n            #            id.top.style['justify-content'] = 'center' # so the text is above img\n            id['text-container'].style.height = '10%' # so the text is above img\n            id.text.style.height = '10%' # so the text is above img\n            id['text-container'].appear()\n            id.im.appear()\n            @presentation_time_unixms = new Date().getTime()\n            @readyForKey = true\n        , 1000)\n\n\nclass Thank_You extends Instruction\n    constructor: (text) ->\n        super(text, id.feedback)\n        @controls = []\n\n#        dont need these any more since I prevented scrolling in the first place\n#addEventListener(\"keydown\", (e) ->\n# prevent space and arrow keys from scrolling\n#    if [32, 37, 38, 39, 40].indexOf(e.keyCode) > -1\n#        e.preventDefault()\n#, false)\n\nkeyup (e) ->\n    if _current_step? and e.keyCode in _current_step.controls.map((c)->c.keyCode)\n        if _current_step.readyForKey\n            _current_step.readyForKey = false\n            _current_step.onkey(e)\n            _current_step.finish()\nrun_step = (idx) ->\n    id['text-container'].fade()\n    _current_step_index = idx\n    _current_step = _steps[_current_step_index]\n    _current_step.run()\ncheck_platform = (run_after) ->\n    browser = platform.name\n    os = platform.os.family\n    accepted_browsers = ['Firefox', 'Safari', 'Chrome']\n    accepted_oss = ['OS X']\n    if browser in accepted_browsers and os in accepted_oss\n        run_after()\n    else\n        id.text.innerHTML = \"Sorry, this experiment has not yet successfully passed tests on your platform (you are using #{os} and #{browser}). Please access this site using a supported operating system and browser: (Operating Systems: [#{accepted_oss.join(',')}], Browsers: [#{accepted_browsers.join(',')}]).\"\n        id['top'].unfade()\n        id['text-container'].unfade()\n        id['text'].unfade()\nrun_steps = (steps) ->\n    for i in [1..(steps.length - 1)]\n        steps[i].last_step = steps[i - 1]\n        if steps[i] instanceof Thank_You\n            steps[i - 1].is_last_trial = true\n    _steps = steps\n    id.prog.max = _steps.length - 1\n    id.top.unfade()\n    run_step(0)\npush_data = ->\n    data =\n        version : id.VERSION.innerHTML\n        steps   : _steps.map((s)->s.data())\n        feedback: id.textarea.value\n    new ExperimentDataBinAPI(inner.API_URL).push(\n            user,\n            data\n    )\npush_data_async = (onFinish) ->\n    data =\n        version : id.VERSION.innerHTML\n        steps   : _steps.map((s)->s.data())\n        feedback: id.textarea.value\n    new ExperimentDataBinAPI(inner.API_URL).push_async(\n            user,\n            data,\n            onFinish\n    )\n\nid.button.addEventListener(\n        \"click\",\n    ->\n        id.feedback_status.innerHTML = 'Please wait for data to upload...'\n        push_data_async(->\n            id.feedback_status.innerHTML = 'Feedback submitted, thank you!'\n        )\n)\n\nfsHandler = ->\n    if not window.IS_DEV_MODE\n        if (document.webkitIsFullScreen or document.mozFullScreen or (document.msFullscreenElement is not null))\n            id.top.appear()\n            id['progress-container'].appear()\n            id.fullscreen_button.disappear()\n        else\n            id.top.disappear()\n            id['progress-container'].disappear()\n            id.fullscreen_button.appear()\n\nid['fullscreen_button'].onclick = (e) ->\n    openFullscreen(tag.body)\n\nif document.addEventListener\n    document.addEventListener('fullscreenchange', fsHandler, false)\n    document.addEventListener('mozfullscreenchange', fsHandler, false)\n    document.addEventListener('MSFullscreenChange', fsHandler, false)\n    document.addEventListener('webkitfullscreenchange', fsHandler, false)\n\n"
  ]
}